<HTML
><HEAD
><TITLE
>Writing a make-rule to generate dependency information</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.74b"><LINK
REL="HOME"
TITLE="fastdep manual"
HREF="book1.htm"><LINK
REL="PREVIOUS"
TITLE="Basic usage"
HREF="c34.htm"><LINK
REL="NEXT"
TITLE="Automatically regenerating dependency information"
HREF="c63.htm"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>fastdep manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c34.htm"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c63.htm"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="AEN49"
>Chapter 3. Writing a make-rule to generate dependency information</A
></H1
><P
>In general it is much more convenient to let your makefiles
	generate their own dependency information instead of doing it by hand
	as described in the previous chapter.</P
><P
>Let's say we have a variable in our makefile that lists all
	source files, <TT
CLASS="VARNAME"
>SOURCES</TT
>. We also want
	to save dependency information to a file named <TT
CLASS="FILENAME"
>.depend</TT
>.
	Here is how to write a make rule to accomplish just that.</P
><DIV
CLASS="EXAMPLE"
><A
NAME="AEN55"
></A
><P
><B
>Example 3-1. Makefile fragment to generate dependencies from
		a number of sources</B
></P
><PRE
CLASS="PROGRAMLISTING"
>.depend:
	fastdep $(SOURCES) &#62; .depend

-include .depend
	</PRE
></DIV
><P
>It adds a new target <TT
CLASS="FILENAME"
>.depend</TT
>, 
	which is file to hold the dependency information generated by fastdep
	for all files listed in <TT
CLASS="VARNAME"
>SOURCES</TT
>. The fragment
also includes this file in the Makefile itself when it exist. If not
make will generate it first (using the rule
we specified), restart itself and include it next.</P
><P
>Now each time we want to regenerate dependencies, all we
	have to do is delete the <TT
CLASS="FILENAME"
>.depend</TT
> file and launch
	make.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c34.htm"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.htm"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c63.htm"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Basic usage</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Automatically regenerating dependency information</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>